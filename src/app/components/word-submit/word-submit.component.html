<button class="back" (click)="back()">
  <img src="assets/images/back-btn.png">
</button>
<div class="container">
  <form [formGroup]="form" (ngSubmit)="submitWord()">
    <h1>Submit a new word</h1>

      <div class="form-group">
        <label for="word">Word</label><br/>
        <input type="text" formControlName="word" class="form-control" id="word" placeholder="e.g. お疲れ">
        <p class="error" *ngIf="form.controls['word'].dirty && form.hasError('required', 'word')">This field is required *</p>
        <p class="error" *ngIf="form.controls['word'].dirty && form.hasError('pattern', 'word')">This field must be in japanese *</p>
        <p class="error" *ngIf="form.controls['word'].dirty && form.hasError('maxlength', 'word')">Word is too long *</p>
      </div>

      <div class="form-group">
        <label for="meaning">Meaning</label><br/>
        <div formArrayName="meaning">
          <div *ngFor="let meaningControl of meaningFormArray.controls; let i = index;">
            <div class="input-btn-div">
              <input type="text" class="form-control" [formControlName]="i" placeholder="e.g. Good work">
              <button type="button" class="btn btn-remove" (click)="removeArrayEl(meaningFormArray, i)" [disabled]="meaningFormArray.controls.length <= 1">
                X
              </button>
            </div>
            <div *ngIf="meaningControl.invalid && meaningControl.dirty">
              <p class="error" *ngIf="meaningControl.errors?.['required']">Meaning is required *</p>
              <p class="error" *ngIf="meaningControl.errors?.['maxlength']">Meaning is too long *</p>
            </div>
          </div>
          <button type="button" class="btn btn-add" (click)="addArrayEl(meaningFormArray)">
            Add
          </button>
        </div>
      </div>

      <div class="form-group">
        <label for="pronunciation">Pronunciation</label><br/>
        <div formArrayName="pronunciation">
          <div *ngFor="let pronunciationControl of pronunciationFormArray.controls; let i = index;">
            <div class="input-btn-div">
              <input type="text" class="form-control" [formControlName]="i" placeholder="e.g. おつかれ">
              <button type="button" class="btn btn-remove" (click)="removeArrayEl(pronunciationFormArray, i)" [disabled]="pronunciationFormArray.controls.length <= 1">
              X
              </button>
            </div>
            <div *ngIf="pronunciationControl.invalid && pronunciationControl.dirty">
              <p class="error" *ngIf="pronunciationControl.errors?.['required']">Pronunciation is required *</p>
              <p class="error" *ngIf="pronunciationControl.errors?.['maxlength']">Pronunciation is too long *</p>
              <p class="error" *ngIf="pronunciationControl.errors?.['pattern']">Must be in hiragana / katakana *</p>
            </div>
          </div>
          <button type="button" class="btn btn-add" (click)="addArrayEl(pronunciationFormArray, true)">
            Add
          </button>
        </div>
      </div>

      <!-- <div class="form-group">
        <label for="category">Category</label><br/>
        <select formControlName="category" class="form-control" id="category">
          <option value="other" selected>Other</option>
          <option value="numbers">Numbers</option>
          <option value="animals">Animals</option>
          <option value="food">Food</option>
          <option value="house">House</option>
          <option value="time">Time</option>
        </select>
      </div> -->

      <div class="form-group">
        <label for="notes">Notes / extra data (optional)</label><br/>
        <input type="text" formControlName="notes" class="form-control" id="notes" placeholder="Enter notes...">
      </div>

      <button type="submit" class="submit" (click)="markFormGroupTouched()">Submit</button>
      <button type="reset" (click)="resetForm(); status = 'init'" class="reset">Reset</button>
  </form>
  <br/>
  <p class="success" *ngIf="status === 'success'">Word submitted!</p>
  <p class="error" *ngIf="status === 'error'">{{ errorInfo }}</p>
</div>
